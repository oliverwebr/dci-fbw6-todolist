class Todo{constructor(){this.db=JSON.parse(localStorage.getItem("todos"))||[],this.elements={list:document.querySelector("ul.list-group"),template:document.getElementById("template"),input:document.getElementById("input"),button:document.querySelector("button")},this.formEventListener(),this.render(),document.addEventListener("blur",t=>{t.target.classList.contains("title")&&this.updateCart(t.target.parentElement.dataset.name,!1,!1,!0)},!0),document.addEventListener("click",t=>{if(t.target&&t.target.classList.contains("btn-outline-danger")){this.findItemKey(t.target.parentElement.dataset.name);this.updateCart(t.target.dataset.name,!0)}else if(t.target.classList.contains("checkbutton")){this.findItemKey(t.target.parentElement.dataset.name);this.updateCart(t.target.parentElement.dataset.name,!1,!0)}})}formEventListener(){this.elements.button.addEventListener("click",t=>{t.preventDefault(),this.updateCart(this.elements.input.value),this.elements.input.value=""})}findItemKey(t){for(let e=0;e<this.db.length;e++)if(this.db[e].title==t)return e}updateCart(t,e=!1,s=!1,n=!1){let i=this.findItemKey(t);n?this.db[this.findItemKey(event.target.parentElement.dataset.name)].title=event.target.innerHTML:s?this.db[i].state=!this.db[i].state:e?this.db.splice(i,1):void 0===i?this.db.push({title:this.elements.input.value,state:!1}):console.log("item already there"),localStorage.setItem("todos",JSON.stringify(this.db)),this.render()}render(){var t=this.elements.template,e=document.createElement("ul");for(var s in"state=false"===window.location.search.substr(1)?this.db=this.db.filter(t=>!t.state):"state=true"===window.location.search.substr(1)&&(this.db=this.db.filter(t=>t.state)),this.db){var n=t.cloneNode(!0);n.removeAttribute("id"),n.classList.add("d-flex"),n.classList.remove("d-none"),this.db[s].state&&(n.classList.add("list-group-item-light"),n.querySelector(".checkbutton").innerHTML="todo",n.querySelector(".checkbutton").classList.remove("btn-outline-success"),n.querySelector(".checkbutton").classList.add("btn-success")),n.querySelector(".btn-outline-danger").parentElement.dataset.name=this.db[s].title,n.querySelector(".title").innerHTML=this.db[s].title,e.appendChild(n)}this.elements.list.innerHTML=e.innerHTML}}var instaceOfTodo=new Todo;